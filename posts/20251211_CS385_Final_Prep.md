---
title: CS385 Lab Exam 3: The Final Survival Guide
title_en: CS385 Lab Exam 3: The Final Survival Guide
title_zh: CS385 ç»ˆææˆ˜å¤‡ï¼šå¯¹è±¡æ“ä½œä¸ React é¿å‘æŒ‡å—
date: 2025-12-11
categories: CS385
tags: React, Objects, ExamPrep, JavaScript
summary_en: A targeted flashcard quiz for tomorrow's Lab Exam 3. Focuses on Topic 10 (Nested Maps, Object.getOwnPropertyNames) and critical rendering pitfalls.
summary_zh: é’ˆå¯¹ Lab Exam 3 çš„çªå‡»ç‰¹è®­ã€‚åŒ…å« Topic 10 æ ¸å¿ƒè€ƒç‚¹ï¼ˆåµŒå¥—æ˜ å°„ã€å¯¹è±¡å±æ€§æå–ï¼‰åŠ React æ¸²æŸ“æ˜“é”™ç‚¹è§£æã€‚
---

[EN]
# ğŸ›¡ï¸ Defcon 1: Exam Readiness

Tomorrow is the final battle for CS385. The focus has shifted from simple logic to **Object Manipulation**.
I have analyzed the Mock Exam and previous mistakes. Here are the 6 critical scenarios you **must** recognize instantly.

**Instructions:** Read the code, predict the output, then click to reveal.

---

### Q1: The "Nested Map" Pattern (Topic 10 Core)
You need to render an object where you *don't* know the property names in advance.
Which code snippet correctly renders the values?

```javascript
const data = { id: 99, type: "Bus" };

// Option A
Object.keys(data).map(k => <span>{data.k}</span>)

// Option B
Object.getOwnPropertyNames(data).map(k => <span>{data[k]}</span>)

// Option C
data.map(k => <span>{k}</span>)
```

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ Click to Reveal Answer</summary>

âœ… **Correct Answer: B**

`Object.getOwnPropertyNames(data).map(k => <span>{data[k]}</span>)`

**Rationale:**
1.  `Object.getOwnPropertyNames(data)` returns an array of strings `["id", "type"]`.
2.  Inside the map, `k` is a **string**.
3.  You CANNOT use dot notation (`data.k`) because the object has no property literally named "k".
4.  You **MUST** use bracket notation (`data[k]`) to access the value dynamically.

</details>

---

### Q2: Object Equality Trap
```javascript
const a = { id: 1 };
const b = { id: 1 };

console.log(a === b);
console.log(Object.is(a, b));
```
**Output?**

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ Click to Reveal Answer</summary>

âœ… **Output: false, false**

**Rationale:**
In JavaScript, objects are compared by **Reference (Memory Address)**, not value.
Even though `a` and `b` look identical, they live in different memory locations.
*   **Exam Tip:** In React, this causes unnecessary re-renders in `useEffect` or `memo` if you aren't careful.

</details>

---

### Q3: The "Spread Order" Trap (Mock Exam Q7)
You are mapping an array and adding a new property using the spread operator `...`.
```javascript
const item = { type: "tractor" };

// Case A:
return { factorised: 6000, ...item };

// Case B:
return { ...item, factorised: 6000 };
```
**If the exam asks for the exact output line, does the order matter?**

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ Click to Reveal Answer</summary>

âœ… **YES, it matters.**

*   **Case A Output:** `{"factorised":6000, "type":"tractor"}`
*   **Case B Output:** `{"type":"tractor", "factorised":6000}`

**Rationale:**
While JSON keys are technically unordered, in string output questions (like in the Moodle quiz), the order is determined by **when the property was added**. Pay attention to whether the spread `...item` is at the start or end!

</details>

---

### Q4: React Array Rendering
```javascript
const arr = [1, null, 2, undefined, 3];
return <div>{arr}</div>;
```
**What is strictly rendered to the screen?**

A) `1,2,3`
B) `1null2undefined3`
C) `123`
D) `1 2 3`

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ Click to Reveal Answer</summary>

âœ… **Correct Answer: C** (`123`)

**Rationale:**
1.  React **ignores** `null`, `undefined`, and `boolean` (true/false) values. They render nothing.
2.  React does **NOT** add commas or spaces between array elements automatically.
3.  If you want commas, you must explicitly `.join(',')` or map it.

</details>

---

### Q5: Destructuring "The Rest"
```javascript
const person = { id: 101, name: "Badass", role: "Coder" };
const { id, ...details } = person;

console.log(details);
```
**What is inside `details`?**

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ Click to Reveal Answer</summary>

âœ… **Result:** `{ name: "Badass", role: "Coder" }`

**Rationale:**
This is the **Rest Operator**. It extracts `id` into its own variable, and bundles **everything else** remaining into the `details` object. This is a common pattern to remove a property from an object without mutating the original.

</details>

---

### Q6: The API Path Pitfall (Lab Exam 1 Recycled)
Your API returns this JSON:
```json
{
  "status": "ok",
  "features": [ { "id": 1 }, { "id": 2 } ]
}
```
You want to store the array in state `data`.
**Which is correct?**

A) `setData(json)`
B) `setData(json.features)`
C) `setData(features)`

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ Click to Reveal Answer</summary>

âœ… **Correct Answer: B**

`setData(json.features)`

**Rationale:**
`json` is the *entire* envelope. If you do `setData(json)`, `data.map` will crash because `data` is an object, not an array. You must drill down to the specific property that holds the array (`.features`).

</details>

---

### ğŸ§  Final Cheat Sheet: The "Double Map"
Memorize this pattern for Topic 10 questions involving "unknown objects":

```javascript
// Outer Map: Iterates Rows (Objects)
{data.map((obj, i) => (
  <div key={i}>
     {/* Inner Map: Iterates Columns (Properties) */}
     {Object.getOwnPropertyNames(obj).map(key => (
        <span key={key}>
           {/* ACCESS: Use Bracket Notation! */}
           {key}: {obj[key]} 
        </span>
     ))}
  </div>
))}
```

Good luck. Stay calm. Execute. ğŸ‘Š

[END]

[ZH]
# âš¡ï¸ CS385 è€ƒå‰æ€¥æ•‘åŒ… (Lab Exam 3)

æ˜å¤©å°±æ˜¯ Lab Exam 3ã€‚è¿™æ¬¡çš„æ ¸å¿ƒä¸æ˜¯ç®€å•çš„é€»è¾‘ï¼Œè€Œæ˜¯ **JS å¯¹è±¡å†…å­˜æ¨¡å‹** å’Œ **React æ¸²æŸ“æœºåˆ¶**ã€‚
æˆ‘åˆ†æäº† Mock Exam å’Œä¹‹å‰çš„é”™é¢˜ï¼Œæ€»ç»“å‡ºä»¥ä¸‹ 6 ä¸ªå¿…è€ƒ/æ˜“é”™ç‚¹ã€‚ä¸è¦åœ¨åŒä¸€ä¸ªå‘é‡Œè·Œå€’ä¸¤æ¬¡ã€‚

**ä½¿ç”¨è¯´æ˜ï¼š** é˜…è¯»ä»£ç ï¼Œåœ¨è„‘ä¸­å¾—å‡ºç­”æ¡ˆï¼Œç„¶åç‚¹å‡» **"â–¼ Reveal Answer"** éªŒè¯ã€‚

---

### Q1: "åµŒå¥—æ˜ å°„" (Nested Map) - Topic 10 æ ¸å¿ƒ
ä½ éœ€è¦æ¸²æŸ“ä¸€ä¸ªå¯¹è±¡ï¼Œä½†ä½ é¢„å…ˆä¸çŸ¥é“å®ƒé‡Œé¢æœ‰å“ªäº›å±æ€§åï¼ˆå¯èƒ½æ˜¯ name, å¯èƒ½æ˜¯ idï¼‰ã€‚
å“ªæ®µä»£ç èƒ½æ­£ç¡®å–å‡ºå€¼ï¼Ÿ

```javascript
const data = { id: 99, type: "Bus" };

// é€‰é¡¹ A
Object.keys(data).map(k => <span>{data.k}</span>)

// é€‰é¡¹ B
Object.getOwnPropertyNames(data).map(k => <span>{data[k]}</span>)

// é€‰é¡¹ C
data.map(k => <span>{k}</span>)
```

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ ç‚¹å‡»æ­æ™“ç­”æ¡ˆ</summary>

âœ… **æ­£ç¡®ç­”æ¡ˆ: B**

`Object.getOwnPropertyNames(data).map(k => <span>{data[k]}</span>)`

**è§£æ:**
1.  `Object.getOwnPropertyNames` è¿”å›å±æ€§åæ•°ç»„ `["id", "type"]`ã€‚
2.  åœ¨ map å†…éƒ¨ï¼Œ`k` æ˜¯ä¸€ä¸ª **å­—ç¬¦ä¸²**ã€‚
3.  ä½ **ä¸èƒ½**ç”¨ç‚¹å· `data.k`ï¼Œå› ä¸ºå¯¹è±¡é‡Œæ²¡æœ‰å« "k" çš„å±æ€§ã€‚
4.  ä½ **å¿…é¡»**ç”¨æ–¹æ‹¬å· `data[k]` æ¥è¿›è¡ŒåŠ¨æ€å–å€¼ã€‚

</details>

---

### Q2: å¯¹è±¡ç›¸ç­‰æ€§é™·é˜± (Object Equality)
```javascript
const a = { id: 1 };
const b = { id: 1 };

console.log(a === b);
console.log(Object.is(a, b));
```
**è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ**

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ ç‚¹å‡»æ­æ™“ç­”æ¡ˆ</summary>

âœ… **è¾“å‡º: false, false**

**è§£æ:**
åœ¨ JS ä¸­ï¼Œå¯¹è±¡æ¯”è¾ƒçš„æ˜¯ **å†…å­˜åœ°å€ (Reference)**ï¼Œè€Œä¸æ˜¯å†…å®¹ã€‚
å³ä½¿ `a` å’Œ `b` é•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼Œå®ƒä»¬ä½åœ¨å†…å­˜çš„ä¸åŒæˆ¿é—´ã€‚
*   **å®æˆ˜è­¦ç¤º:** åœ¨ React ä¸­ï¼Œè¿™ä¼šå¯¼è‡´ `useEffect` ç–¯ç‹‚é‡æ¸²æŸ“ï¼Œæˆ–è€… `memo` å¤±æ•ˆã€‚

</details>

---

### Q3: Spread é¡ºåºé™·é˜± (Mock Exam Q7 åŸé¢˜å˜ç§)
ä½ åœ¨ map ä¸­ä½¿ç”¨ Spread Operator `...` æ¥æ·»åŠ æ–°å±æ€§ã€‚
```javascript
const item = { type: "tractor" };

// å†™æ³• A:
return { factorised: 6000, ...item };

// å†™æ³• B:
return { ...item, factorised: 6000 };
```
**å¦‚æœè€ƒè¯•é—®ä½ æœ€ç»ˆè¾“å‡ºçš„å­—ç¬¦ä¸²é¡ºåºï¼Œè¿™ä¸¤ä¸ªä¸€æ ·å—ï¼Ÿ**

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ ç‚¹å‡»æ­æ™“ç­”æ¡ˆ</summary>

âœ… **ä¸ä¸€æ ·ï¼Œé¡ºåºè‡³å…³é‡è¦ã€‚**

*   **å†™æ³• A è¾“å‡º:** `{"factorised":6000, "type":"tractor"}` (æ–°å±æ€§åœ¨å‰)
*   **å†™æ³• B è¾“å‡º:** `{"type":"tractor", "factorised":6000}` (æ–°å±æ€§åœ¨å)

**è§£æ:**
è™½ç„¶ JSON è§„èŒƒè¯´é”®æ˜¯æ— åºçš„ï¼Œä½†åœ¨è¿™ç§ **"What is the output line"** çš„è€ƒè¯•é¢˜ä¸­ï¼Œå­—ç¬¦ä¸²ç”Ÿæˆçš„é¡ºåºå–å†³äºä»£ç ä¹¦å†™é¡ºåºã€‚ä¸€å®šè¦çœ‹æ¸… `...` æ˜¯åœ¨å‰é¢è¿˜æ˜¯åé¢ï¼

</details>

---

### Q4: React æ•°ç»„æ¸²æŸ“æœºåˆ¶
```javascript
const arr = [1, null, 2, undefined, 3];
return <div>{arr}</div>;
```
**å±å¹•ä¸Šä¸¥æ ¼æ˜¾ç¤ºçš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ**

A) `1,2,3`
B) `1null2undefined3`
C) `123`
D) `1 2 3`

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ ç‚¹å‡»æ­æ™“ç­”æ¡ˆ</summary>

âœ… **æ­£ç¡®ç­”æ¡ˆ: C** (`123`)

**è§£æ:**
1.  React **å®Œå…¨å¿½ç•¥** `null`, `undefined`, å’Œå¸ƒå°”å€¼ (true/false)ã€‚
2.  React **ä¸ä¼š**è‡ªåŠ¨åŠ é€—å·æˆ–ç©ºæ ¼ã€‚å®ƒä¼šæŠŠå‰©ä¸‹çš„æ•°å­—/å­—ç¬¦ä¸²ç´§ç´§æ‹¼åœ¨ä¸€èµ·ã€‚
3.  é”™é¢˜æœ¬è­¦ç¤ºï¼šLab Exam 1 çš„ `-1+20+1` å˜æˆ `-1201` å°±æ˜¯è¿™ä¸ªåŸç†ã€‚

</details>

---

### Q5: è§£æ„èµ‹å€¼ä¸ "Rest" (å‰©ä½™å‚æ•°)
```javascript
const person = { id: 101, name: "Badass", role: "Coder" };
const { id, ...details } = person;

console.log(details);
```
**`details` é‡Œé¢æœ‰ä»€ä¹ˆï¼Ÿ**

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ ç‚¹å‡»æ­æ™“ç­”æ¡ˆ</summary>

âœ… **ç»“æœ:** `{ name: "Badass", role: "Coder" }`

**è§£æ:**
è¿™æ˜¯ **Rest Operator (...)**ã€‚å®ƒæŠŠ `id` æ‹¿èµ°ï¼ŒæŠŠ**å‰©ä¸‹æ‰€æœ‰ä¸œè¥¿**æ‰“åŒ…è¿› `details`ã€‚è¿™æ˜¯åœ¨ä¸ä¿®æ”¹åŸå¯¹è±¡çš„æƒ…å†µä¸‹â€œåˆ é™¤â€æŸä¸ªå±æ€§çš„æ ‡å‡†å†™æ³•ã€‚

</details>

---

### Q6: API è·¯å¾„é”™è¯¯ (Lab Exam 1 ç»å…¸é”™è¯¯)
API è¿”å›å¦‚ä¸‹ JSON:
```json
{
  "status": "ok",
  "features": [ { "id": 1 }, { "id": 2 } ]
}
```
ä½ æƒ³æŠŠæ•°ç»„å­˜å…¥ state `data`ã€‚
**å“ªè¡Œä»£ç æ˜¯æ•‘å‘½çš„ï¼Ÿ**

A) `setData(json)`
B) `setData(json.features)`
C) `setData(features)`

<details> <summary style="cursor: pointer; color: #facc15; font-weight: bold;">â–¼ ç‚¹å‡»æ­æ™“ç­”æ¡ˆ</summary>

âœ… **æ­£ç¡®ç­”æ¡ˆ: B**

`setData(json.features)`

**è§£æ:**
`json` æ˜¯æ•´ä¸ªå¿«é€’åŒ…è£¹ã€‚å¦‚æœä½ ç”¨ `setData(json)`ï¼Œä½ çš„ `data` å°±æ˜¯ä¸ªå¯¹è±¡ï¼Œåé¢è°ƒç”¨ `data.map` æ—¶ç¨‹åºä¼šç›´æ¥å´©æºƒ (Crash)ï¼ŒæŠ¥é”™ `map is not a function`ã€‚å¿…é¡»ç‚¹å‡º `.features` æ‹¿åˆ°é‡Œé¢çš„æ•°ç»„ã€‚

</details>

---

### ğŸ§  ç»ˆæå°æŠ„ï¼šåŒé‡ Map (Double Map)
æ­»è®°ç¡¬èƒŒè¿™ä¸ªæ¨¡æ¿ï¼Œè¿™æ˜¯ Topic 10 å¤„ç†â€œæœªçŸ¥å¯¹è±¡â€çš„ä¸‡èƒ½é’¥åŒ™ï¼š

```javascript
// å¤–å±‚ Map: éå†è¡Œ (å¯¹è±¡æ•°ç»„)
{data.map((obj, i) => (
  <div key={i}>
     {/* å†…å±‚ Map: éå†åˆ— (å±æ€§å) */}
     {Object.getOwnPropertyNames(obj).map(key => (
        <span key={key}>
           {/* æ ¸å¿ƒ: å¿…é¡»ç”¨æ–¹æ‹¬å·å–å€¼! */}
           {key}: {obj[key]} 
        </span>
     ))}
  </div>
))}
```

å…„å¼Ÿä»¬ï¼Œç¨³ä½ã€‚æˆ‘ä»¬èƒ½èµ¢ã€‚ ğŸ‘Š
[END]